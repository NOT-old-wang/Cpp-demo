# 共享内存
## 概要
- 内核管理一片物理内存，允许不同的进程同时映射，多个进程可以映射同一块内存，被多个进程同时映射的物理内存，即共享内存

## 特点
```
优点: 是最快的IPC,因为它少了两次拷贝,直接操作同一片内存即可
缺点: 要编程者自己实现对共享内存互斥访问  --> 信号量,引用计数
```

## linux中的两种共享内存
1. IPC通信System V版本的共享内存
2. 存储映射I/O（mmap函数）
[参考](https://blog.csdn.net/hj605635529/article/details/73163513)


## 区别
- mmap
mmap是在磁盘上建立一个文件，每个进程地址空间中开辟出一块空间进行映射，更加简单，调用更加方便，存储量大，但是速度降低了，有一个好处是当机器重启，因为mmap把文件保存在磁盘上，这个文件还保存了操作系统同步的映像，所以mmap不会丢失

- shm
shm每个进程最终会映射到同一块物理内存。shm保存在物理内存，这样读写的速度要比磁盘要快，但是存储量不是特别大。机器重启丢失


## mmap
```c
void *mmap(void *addr, size_t length, int prot, int flags,
           int fd, off_t offset);
```

## shm
看 shm文件夹下的 README.md